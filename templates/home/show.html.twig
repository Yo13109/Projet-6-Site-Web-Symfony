{% extends "base.html.twig" %}
{% form_theme formComment 'bootstrap_4_layout.html.twig' %}

{% block body %}


	<div class="container mt-5">
		<div class="row justify-content-center mt-5">
			<div class="col-md-10 col-md-offset-1 mt-5 mb-4">

				<div class="card mt-5">
				{% if trick.pictures | length <= 0 %}
								<img src={{asset('Image/MethodeAir.jpg')}} class="card-img-top" alt="">


							{% else %}
							
								{% for picture in trick.pictures %}


									<img src={{asset('Image/' ~ picture.filename )}} class="card-img-top" alt="">

								{% endfor %}
							{% endif %}
					<div class="card-body">
						<ul class="list-inline trick-data">
						
							<li class="list-inline-item">
								{% for comment in trick.comments %}
									Par :
									{{comment.user.userName}}
								{% endfor %}
							</li>
							|

							<li class="list-inline-item">
								Ajouté le
								{{trick.createdate | date('d/m/y') }}
								(<small>Mise à jour le :
									{{trick.updatedate | date('d/m/y')}}
								</small>)
							</li>
							|
							<li class="list-inline-item">
								Catégorie :
								{{trick.category.name}}
							</li>
							|

						</ul>
						<hr>
						<h4 class="card-title">
							<strong>{{trick.name}}</strong>
						</h4>
						<hr>
						<!-- Start Carousel -->
						<div class="row d-none d-lg-flex load-media">
							<div class="col-lg-6 col-md-12">
								<div id="carousel" class="carousel slide mt-3 mb-2" data-ride="carousel">
									<ol class="carousel-indicators">
										<li data-target=".carousel" data-slide-to="0" class=""></li>
										<li data-target=".carousel" data-slide-to="1" class="active"></li>
									</ol>
									<div class="carousel-inner enlarge">
										<div class="carousel-item">
											{% for picture in trick.pictures %}


												<img src={{asset('Image/' ~ picture.filename)}} class="card-img-top" alt="">

											</div>
											<div class="carousel-item active">
												<img src={{asset('Image/' ~ picture.filename)}} class="card-img-top" alt="">
											</div>
										{% endfor %}

									</div>
									<a class="carousel-control-prev" href="#carousel" data-slide="prev">
										<span class="carousel-control-prev-icon"></span>
									</a>
									<a class="carousel-control-next" href="#carousel" data-slide="next">
										<span class="carousel-control-next-icon"></span>
									</a>
								</div>
							</div>
							<div class="col-lg-6 col-md-12">
								<div id="carousel-v" class="carousel slide mt-3 mb-2" data-ride="carousel">
									<ol class="carousel-indicators">
										<li data-target="#carousel-v" data-slide-to="0" class=""></li>
										<li data-target="#carousel-v" data-slide-to="1" class="active"></li>
									</ol>
									<div class="carousel-inner">
										<div class="carousel-item">
											<iframe src="https://www.youtube.com/embed/SlhGVnFPTDE" allowfullscreen=""></iframe>
										</div>
										<div class="carousel-item active">
											<iframe src="https://www.youtube.com/embed/arzLq-47QFA" allowfullscreen=""></iframe>
										</div>

									</div>
									<a class="carousel-control-prev" href="#carousel-v" data-slide="prev">
										<span class="carousel-control-prev-icon"></span>
									</a>
									<a class="carousel-control-next" href="#carousel-v" data-slide="next">
										<span class="carousel-control-next-icon"></span>
									</a>
								</div>
							</div>
						</div>
						<div class="text-center">
							<a href="#" id="loadMedia" class="d-md-block d-lg-none">
								<button class="btn btn-outline-secondary">Afficher les médias</button>
							</a>
							<a href="#" id="hideMedia" class="d-none d-md-none d-lg-none">
								<button class="btn btn-outline-secondary mt-3">Masquer les médias</button>
							</a>
						</div>
						<!-- End Carousel -->
						<hr>
						<h5 class="card-title">Description</h5>
						<p class="card-text text-justify">{{trick.content}}</p>
					</div>
					<!--  End Trick -->

					<!-- Start Comment Add Form -->
					<div class="col-md-12 px-0 mb-30">
						<div class="comments text-center p-3"></div>
					</div>
					<!-- Start Comment Add Form -->

					<!-- Start Comments -->
					<span class="comments-anchor" id="comments-block"></span>
					<div class="col-md-12 pl-0 pr-0">
						<div class="comments text-left padDiv mb-30">
							<div class="entry-comments">
								<ul class="entry-comments-list list-unstyled"></ul>
							</div>
						</div>
					</div>
					<!-- End Comments -->
				</div>
			</div>
		</div>


		<!--	<div class="container">
				<div class="card  mb-3 mt-5 ">
					
							
						
						<div class="card-content">
							<div class='container'>
								<div class='row'>
		
									{% for picture in trick.pictures %}
		
										<img src={{asset('Image/' ~ picture.filename)}} class="card-img-top" alt="">
		
		
									{% endfor %}
		
									<h2>{{trick.name}}</h2>
							<div class="metadata">
								Ecrit le
								{{trick.createdate | date('d/m/y')}}
								à
								{{trick.createdate| date('H:i')}}
								dans la catégorie
								{{trick.category.name}}
		
									{{trick.content| raw}}
								</div>
		
							</div>
						</div>
		
					</section>
				</div>
		
				<div class="row">
					{% for picture in trick.pictures %}
		
						<img src={{asset('Image/'~ picture.filename)}} class="col-3" alt="" width="100" height="100">
		
					{% endfor %}
					<div class='col-6'>
						{% for video in trick.video %}
		
		
							<iframe width="250" height="300" src="https://youtu.be/_hxLS2ErMiY" title="YouTube" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
						{% endfor %}
					</div>
				</div>-->


		{% if app.user %}

			<div class="col-lg-6 offset-lg-3 col-md-12">
				<div class="card  mt-5">
					<div class="card-header">


						<h3>
							Ajout d'un commentaire
						</h3>

					</div>
					<div class="card-content mb-5">
						{{ form_start(formComment) }}

						{{ form_row(formComment.content,{'attr':{'placeholder':"Ecrire un commentaire..."}}) }}
						{{ form_row(formComment.user) }}
					</div>

					<button type="submit" class="btn btn-success">Ajouter un commentaire</button>
					{{ form_end(formComment) }}
				</div>
			</div>
		{% else %}
			<h5>
				<i class="fas fa-exclamation-triangle"></i>
				Vous ne pouvez pas commenter si vous n'êtes pas connecté!<i class="fas fa-exclamation-triangle"></i>
			</h5>
			<a class="btn btn-success" href="{{path('security_connexion')}}">Connexion</a>


		{% endif %}
		<section id="commentaires" class='mt-5 mb-4'>


			{% for comment in trick.comments %}


				<div class="comment">

					<div class="row">
						<div class="col-3 mt-5">

							{{comment.user.userName}}
							<img src={{asset('Image/' ~ comment.user.avatar)}} class="" alt="" width="50" height="50"></div>


						<div class="col mt-5">{{comment.content}}
						</div>

						<div class='col-3 mt-5'>
							<small>{{comment.date | date('d/m/y')}}
								à
								{{comment.date | date('H:i')}}</small>
						</div>
					</div>
				</div>


			{% endfor %}
		</section>
	</div>
</div>{% endblock %}
